alerts:
- rule: DEPLOYMENT_FAILED
- rule: DOMAIN_FAILED
name: buzzwords
region: nyc
static_sites:
- dockerfile_path: client/Dockerfile
  github:
    branch: main
    deploy_on_push: true
    repo: ViciousFish/buzzwords
  name: buzzwords
  output_dir: /build/client/dist
  source_dir: /
- dockerfile_path: client/Dockerfile
  github:
    branch: staging
    deploy_on_push: true
    repo: ViciousFish/buzzwords
  name: buzzwords-staging
  output_dir: /build/client/dist
  source_dir: /
domains:
- domain: buzzwords.gg
  type: PRIMARY
- domain: staging.buzzwords.gg
  type: ALIAS
ingress:
  rules:
  - component:
      name: buzzwords
    match:
      authority:
        exact: buzzwords.gg
      path:
        prefix: /
  - component:
      name: buzzwords-staging
    match:
      authority:
        exact: staging.buzzwords.gg
      path:
        prefix: /
  - component:
      name: buzzwords-api
    match:
      path:
        prefix: /api
envs:
- key: COOKIE_DOMAIN
  scope: RUN_AND_BUILD_TIME
  value: buzzwords.gg
services:
- dockerfile_path: Dockerfile
  envs:
  - key: DB_TYPE
    scope: RUN_AND_BUILD_TIME
    value: mongo
  github:
    branch: main
    deploy_on_push: true
    repo: ViciousFish/buzzwords
  http_port: 8080
  instance_count: 1
  instance_size_slug: basic-xs
  name: buzzwords-api
  source_dir: /